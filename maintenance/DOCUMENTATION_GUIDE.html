

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Documentation Maintenance Guide &mdash; CryoPARES 0.1.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />

  
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=01f34227"></script>
      <script src="../_static/doctools.js?v=9bcbadda"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            CryoPARES
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">User Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../training_guide.html">Training Guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../training_guide.html#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../training_guide.html#table-of-contents">Table of Contents</a></li>
<li class="toctree-l2"><a class="reference internal" href="../training_guide.html#quick-start">Quick Start</a></li>
<li class="toctree-l2"><a class="reference internal" href="../training_guide.html#training-parameters">Training Parameters</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../training_guide.html#essential-parameters">Essential Parameters</a></li>
<li class="toctree-l3"><a class="reference internal" href="../training_guide.html#data-configuration-parameters">Data Configuration Parameters</a></li>
<li class="toctree-l3"><a class="reference internal" href="../training_guide.html#optimizer-configuration">Optimizer Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../training_guide.html#model-architecture-parameters">Model Architecture Parameters</a></li>
<li class="toctree-l3"><a class="reference internal" href="../training_guide.html#data-augmentation-parameters">Data Augmentation Parameters</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../training_guide.html#monitoring-training-with-tensorboard">Monitoring Training with TensorBoard</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../training_guide.html#launching-tensorboard">Launching TensorBoard</a></li>
<li class="toctree-l3"><a class="reference internal" href="../training_guide.html#key-metrics-to-monitor">Key Metrics to Monitor</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../training_guide.html#training-loss-loss">1. Training Loss (<code class="docutils literal notranslate"><span class="pre">loss</span></code>)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../training_guide.html#validation-loss-val-loss">2. Validation Loss (<code class="docutils literal notranslate"><span class="pre">val_loss</span></code>)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../training_guide.html#angular-error-geo-degs-val-geo-degs">3. Angular Error (<code class="docutils literal notranslate"><span class="pre">geo_degs</span></code>, <code class="docutils literal notranslate"><span class="pre">val_geo_degs</span></code>)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../training_guide.html#median-angular-error-val-median-geo-degs">4. Median Angular Error (<code class="docutils literal notranslate"><span class="pre">val_median_geo_degs</span></code>)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../training_guide.html#learning-rate-lr">5. Learning Rate (<code class="docutils literal notranslate"><span class="pre">lr</span></code>)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../training_guide.html#visualization-rotation-matrices">6. Visualization: Rotation Matrices</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../training_guide.html#example-tensorboard-monitoring-session">Example TensorBoard Monitoring Session</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../training_guide.html#overfitting-and-underfitting">Overfitting and Underfitting</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../training_guide.html#what-is-overfitting">What is Overfitting?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../training_guide.html#what-is-underfitting">What is Underfitting?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../training_guide.html#the-sweet-spot">The Sweet Spot</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../training_guide.html#data-preprocessing">Data Preprocessing</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../training_guide.html#image-size-and-sampling-rate">Image Size and Sampling Rate</a></li>
<li class="toctree-l3"><a class="reference internal" href="../training_guide.html#masking">Masking</a></li>
<li class="toctree-l3"><a class="reference internal" href="../training_guide.html#ctf-correction">CTF Correction</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../training_guide.html#advanced-training-options">Advanced Training Options</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../training_guide.html#continue-training">Continue Training</a></li>
<li class="toctree-l3"><a class="reference internal" href="../training_guide.html#fine-tuning">Fine-tuning</a></li>
<li class="toctree-l3"><a class="reference internal" href="../training_guide.html#half-set-training">Half-Set Training</a></li>
<li class="toctree-l3"><a class="reference internal" href="../training_guide.html#simulated-pre-training">Simulated Pre-training</a></li>
<li class="toctree-l3"><a class="reference internal" href="../training_guide.html#model-compilation">Model Compilation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../training_guide.html#debugging-overfitting-on-small-batches">Debugging: Overfitting on Small Batches</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../training_guide.html#troubleshooting-training-issues">Troubleshooting Training Issues</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../training_guide.html#training-is-very-slow">Training is very slow</a></li>
<li class="toctree-l3"><a class="reference internal" href="../training_guide.html#out-of-memory-errors">Out of memory errors</a></li>
<li class="toctree-l3"><a class="reference internal" href="../training_guide.html#too-many-open-files-error">“Too many open files” error</a></li>
<li class="toctree-l3"><a class="reference internal" href="../training_guide.html#loss-is-nan">Loss is NaN</a></li>
<li class="toctree-l3"><a class="reference internal" href="../training_guide.html#model-not-improving">Model not improving</a></li>
<li class="toctree-l3"><a class="reference internal" href="../training_guide.html#validation-loss-jumps-around">Validation loss jumps around</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../training_guide.html#see-also">See Also</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../configuration_guide.html">Configuration Guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../configuration_guide.html#table-of-contents">Table of Contents</a></li>
<li class="toctree-l2"><a class="reference internal" href="../configuration_guide.html#configuration-system-overview">Configuration System Overview</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../configuration_guide.html#configuration-sources-in-order-of-precedence">Configuration Sources (in order of precedence)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../configuration_guide.html#using-config-overrides">Using Config Overrides</a></li>
<li class="toctree-l3"><a class="reference internal" href="../configuration_guide.html#using-yaml-config-files">Using YAML Config Files</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../configuration_guide.html#viewing-available-options">Viewing Available Options</a></li>
<li class="toctree-l2"><a class="reference internal" href="../configuration_guide.html#configuration-hierarchy">Configuration Hierarchy</a></li>
<li class="toctree-l2"><a class="reference internal" href="../configuration_guide.html#reading-configuration-files">Reading Configuration Files</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../configuration_guide.html#configuration-file-locations">Configuration File Locations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../configuration_guide.html#how-to-read-configuration-files">How to Read Configuration Files</a></li>
<li class="toctree-l3"><a class="reference internal" href="../configuration_guide.html#example-finding-training-parameters">Example: Finding Training Parameters</a></li>
<li class="toctree-l3"><a class="reference internal" href="../configuration_guide.html#example-finding-nested-parameters">Example: Finding Nested Parameters</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../configuration_guide.html#quick-parameter-reference">Quick Parameter Reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="../configuration_guide.html#saving-and-loading-configurations">Saving and Loading Configurations</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../configuration_guide.html#exporting-current-configuration">Exporting Current Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../configuration_guide.html#reusing-a-configuration">Reusing a Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../configuration_guide.html#overriding-loaded-config">Overriding Loaded Config</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../configuration_guide.html#see-also">See Also</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../cli.html">Command-Line Interface</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../cli.html#table-of-contents">Table of Contents</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cli.html#cryopares-train"><code class="docutils literal notranslate"><span class="pre">cryopares_train</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="../cli.html#usage">Usage</a></li>
<li class="toctree-l3"><a class="reference internal" href="../cli.html#parameters">Parameters</a></li>
<li class="toctree-l3"><a class="reference internal" href="../cli.html#configuration-overrides">Configuration Overrides</a></li>
<li class="toctree-l3"><a class="reference internal" href="../cli.html#view-all-config-options">View All Config Options</a></li>
<li class="toctree-l3"><a class="reference internal" href="../cli.html#examples">Examples</a></li>
<li class="toctree-l3"><a class="reference internal" href="../cli.html#important-notes">Important Notes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../cli.html#see-also">See Also</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../cli.html#cryopares-infer"><code class="docutils literal notranslate"><span class="pre">cryopares_infer</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="../cli.html#id1">Usage</a></li>
<li class="toctree-l3"><a class="reference internal" href="../cli.html#id2">Parameters</a></li>
<li class="toctree-l3"><a class="reference internal" href="../cli.html#id3">Configuration Overrides</a></li>
<li class="toctree-l3"><a class="reference internal" href="../cli.html#id4">Examples</a></li>
<li class="toctree-l3"><a class="reference internal" href="../cli.html#output-files">Output Files</a></li>
<li class="toctree-l3"><a class="reference internal" href="../cli.html#id5">See Also</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../cli.html#cryopares-projmatching"><code class="docutils literal notranslate"><span class="pre">cryopares_projmatching</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="../cli.html#id6">Usage</a></li>
<li class="toctree-l3"><a class="reference internal" href="../cli.html#id7">Parameters</a></li>
<li class="toctree-l3"><a class="reference internal" href="../cli.html#example">Example</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../cli.html#cryopares-reconstruct"><code class="docutils literal notranslate"><span class="pre">cryopares_reconstruct</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="../cli.html#id8">Usage</a></li>
<li class="toctree-l3"><a class="reference internal" href="../cli.html#id9">Parameters</a></li>
<li class="toctree-l3"><a class="reference internal" href="../cli.html#id10">Example</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../cli.html#compactify-checkpoint"><code class="docutils literal notranslate"><span class="pre">compactify_checkpoint</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="../cli.html#id11">Usage</a></li>
<li class="toctree-l3"><a class="reference internal" href="../cli.html#required-arguments">Required Arguments</a></li>
<li class="toctree-l3"><a class="reference internal" href="../cli.html#optional-arguments">Optional Arguments</a></li>
<li class="toctree-l3"><a class="reference internal" href="../cli.html#id12">Examples</a></li>
<li class="toctree-l3"><a class="reference internal" href="../cli.html#what-s-included">What’s Included</a></li>
<li class="toctree-l3"><a class="reference internal" href="../cli.html#size-reduction">Size Reduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="../cli.html#using-compactified-checkpoints">Using Compactified Checkpoints</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../cli.html#utility-scripts">Utility Scripts</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../cli.html#gmm-histogram-analysis">GMM Histogram Analysis</a></li>
<li class="toctree-l3"><a class="reference internal" href="../cli.html#fsc-computation">FSC Computation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../cli.html#pose-comparison">Pose Comparison</a></li>
<li class="toctree-l3"><a class="reference internal" href="../cli.html#learning-curve-visualization">Learning Curve Visualization</a></li>
<li class="toctree-l3"><a class="reference internal" href="../cli.html#star-file-histograms">STAR File Histograms</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../cli.html#id13">See Also</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../troubleshooting.html">Troubleshooting Guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../troubleshooting.html#table-of-contents">Table of Contents</a></li>
<li class="toctree-l2"><a class="reference internal" href="../troubleshooting.html#installation-issues">Installation Issues</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../troubleshooting.html#pip-install-fails-with-dependency-conflicts">pip install fails with dependency conflicts</a></li>
<li class="toctree-l3"><a class="reference internal" href="../troubleshooting.html#importerror-no-module-named-cryopares">ImportError: No module named ‘cryoPARES’</a></li>
<li class="toctree-l3"><a class="reference internal" href="../troubleshooting.html#cuda-version-mismatch">CUDA version mismatch</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../troubleshooting.html#configuration-issues">Configuration Issues</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../troubleshooting.html#type-mismatch-errors-when-using-config">Type mismatch errors when using –config</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../troubleshooting.html#file-system-issues">File System Issues</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../troubleshooting.html#too-many-open-files-error">“Too many open files” error</a></li>
<li class="toctree-l3"><a class="reference internal" href="../troubleshooting.html#permission-denied-when-writing-outputs">Permission denied when writing outputs</a></li>
<li class="toctree-l3"><a class="reference internal" href="../troubleshooting.html#particle-files-not-found">Particle files not found</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../troubleshooting.html#memory-issues">Memory Issues</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../troubleshooting.html#out-of-memory-oom-during-training">Out of memory (OOM) during training</a></li>
<li class="toctree-l3"><a class="reference internal" href="../troubleshooting.html#out-of-memory-during-inference">Out of memory during inference</a></li>
<li class="toctree-l3"><a class="reference internal" href="../troubleshooting.html#ram-exhausted-when-loading-data">RAM exhausted when loading data</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../troubleshooting.html#training-issues">Training Issues</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../troubleshooting.html#loss-becomes-nan">Loss becomes NaN</a></li>
<li class="toctree-l3"><a class="reference internal" href="../troubleshooting.html#training-doesn-t-improve">Training doesn’t improve</a></li>
<li class="toctree-l3"><a class="reference internal" href="../troubleshooting.html#validation-loss-higher-than-training-loss">Validation loss higher than training loss</a></li>
<li class="toctree-l3"><a class="reference internal" href="../troubleshooting.html#training-crashes-with-killed">Training crashes with “Killed”</a></li>
<li class="toctree-l3"><a class="reference internal" href="../troubleshooting.html#checkpoints-not-saving">Checkpoints not saving</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../troubleshooting.html#inference-issues">Inference Issues</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../troubleshooting.html#predicted-poses-are-random">Predicted poses are random</a></li>
<li class="toctree-l3"><a class="reference internal" href="../troubleshooting.html#reconstruction-is-blurry">Reconstruction is blurry</a></li>
<li class="toctree-l3"><a class="reference internal" href="../troubleshooting.html#no-particles-passed-confidence-threshold">“No particles passed confidence threshold”</a></li>
<li class="toctree-l3"><a class="reference internal" href="../troubleshooting.html#inference-slower-than-expected">Inference slower than expected</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../troubleshooting.html#data-issues">Data Issues</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../troubleshooting.html#ctf-parameters-missing">CTF parameters missing</a></li>
<li class="toctree-l3"><a class="reference internal" href="../troubleshooting.html#orientation-columns-missing">Orientation columns missing</a></li>
<li class="toctree-l3"><a class="reference internal" href="../troubleshooting.html#particles-are-poorly-centered">Particles are poorly centered</a></li>
<li class="toctree-l3"><a class="reference internal" href="../troubleshooting.html#different-sampling-rate-in-data-vs-reference">Different sampling rate in data vs. reference</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../troubleshooting.html#performance-issues">Performance Issues</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../troubleshooting.html#training-is-very-slow">Training is very slow</a></li>
<li class="toctree-l3"><a class="reference internal" href="../troubleshooting.html#inference-is-very-slow">Inference is very slow</a></li>
<li class="toctree-l3"><a class="reference internal" href="../troubleshooting.html#data-loading-is-bottleneck">Data loading is bottleneck</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../troubleshooting.html#cuda-gpu-issues">CUDA/GPU Issues</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../troubleshooting.html#cuda-out-of-memory-but-gpu-seems-empty">“CUDA out of memory” but GPU seems empty</a></li>
<li class="toctree-l3"><a class="reference internal" href="../troubleshooting.html#multiple-gpus-not-being-used">Multiple GPUs not being used</a></li>
<li class="toctree-l3"><a class="reference internal" href="../troubleshooting.html#gpu-slower-than-expected">GPU slower than expected</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../troubleshooting.html#output-quality-issues">Output Quality Issues</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../troubleshooting.html#reconstruction-has-artifacts">Reconstruction has artifacts</a></li>
<li class="toctree-l3"><a class="reference internal" href="../troubleshooting.html#fsc-is-lower-than-expected">FSC is lower than expected</a></li>
<li class="toctree-l3"><a class="reference internal" href="../troubleshooting.html#reconstructed-map-has-wrong-hand">Reconstructed map has wrong hand</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../troubleshooting.html#getting-more-help">Getting More Help</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../troubleshooting.html#enable-debug-mode">Enable Debug Mode</a></li>
<li class="toctree-l3"><a class="reference internal" href="../troubleshooting.html#check-logs">Check Logs</a></li>
<li class="toctree-l3"><a class="reference internal" href="../troubleshooting.html#report-issues">Report Issues</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../troubleshooting.html#see-also">See Also</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../api/index.html">API Reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../api/index.html#core-modules">Core Modules</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../api/training.html">Training API</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../api/training.html#module-cryoPARES.train.train">Main Training Module</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/training.html#module-cryoPARES.train.runTrainOnePartition">Training Execution</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../api/inference.html">Inference API</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../api/inference.html#module-cryoPARES.inference.inferencer">Single Inferencer</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/inference.html#module-cryoPARES.inference.infer">Distributed Inference</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/inference.html#daemon-mode">Daemon Mode</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../api/projection_matching.html">Projection Matching API</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../api/projection_matching.html#module-cryoPARES.projmatching.projMatcher">Projection Matcher</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/projection_matching.html#module-cryoPARES.projmatching.projmatching">Command-Line Interface</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../api/reconstruction.html">Reconstruction API</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../api/reconstruction.html#module-cryoPARES.reconstruction.reconstructor">Reconstructor</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/reconstruction.html#module-cryoPARES.reconstruction.reconstruct">Command-Line Interface</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../api/data_management.html">Data Management API</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../api/data_management.html#module-cryoPARES.datamanager.datamanager">Data Manager</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/data_management.html#module-cryoPARES.datamanager.particlesDataset">Particles Dataset</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/data_management.html#module-cryoPARES.datamanager.augmentations">Augmentations</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/data_management.html#module-cryoPARES.datamanager.ctf.rfft_ctf">CTF Correction</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../api/models.html">Models API</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../api/models.html#module-cryoPARES.models.model">PyTorch Lightning Model</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/models.html#module-cryoPARES.models.image2sphere.image2sphere">Image2Sphere Network</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/models.html#image-encoders">Image Encoders</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/models.html#module-cryoPARES.models.directionalNormalizer.directionalNormalizer">Directional Normalizer</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../api/utils.html">Utilities API</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../api/utils.html#checkpoint-management">Checkpoint Management</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/utils.html#module-cryoPARES.utils.paths">Path Utilities</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/utils.html#module-cryoPARES.utils.torchUtils">PyTorch Utilities</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/utils.html#module-cryoPARES.utils.reconstructionUtils">Reconstruction Utilities</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/utils.html#geometry-utilities">Geometry Utilities</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Additional Resources</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://github.com/rsanchezgarc/cryoPARES">GitHub Repository</a></li>
<li class="toctree-l1"><a class="reference external" href="https://www.biorxiv.org/content/10.1101/2025.03.04.641536v2">Paper</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">CryoPARES</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Documentation Maintenance Guide</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/maintenance/DOCUMENTATION_GUIDE.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="documentation-maintenance-guide">
<h1>Documentation Maintenance Guide<a class="headerlink" href="#documentation-maintenance-guide" title="Link to this heading"></a></h1>
<p>This guide explains how to maintain and update CryoPARES documentation using the centralized documentation system.</p>
<section id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Link to this heading"></a></h2>
<p>CryoPARES uses a centralized documentation system where all parameter descriptions are defined once in <code class="docutils literal notranslate"><span class="pre">PARAM_DOCS</span></code> dictionaries within config classes. These descriptions automatically propagate to:</p>
<ol class="arabic simple">
<li><p><strong>CLI help text</strong> (via <code class="docutils literal notranslate"><span class="pre">argParseFromDoc</span></code>)</p></li>
<li><p><strong>Python docstrings</strong> (via <code class="docutils literal notranslate"><span class="pre">inject_docs_from_config_params</span></code> decorator)</p></li>
<li><p><strong>README.md</strong> (auto-generated sections)</p></li>
<li><p><strong>docs/cli.md</strong> (auto-generated sections)</p></li>
<li><p><strong>Sphinx documentation</strong> (via autodoc)</p></li>
</ol>
</section>
<section id="quick-start">
<h2>Quick Start<a class="headerlink" href="#quick-start" title="Link to this heading"></a></h2>
<section id="adding-or-updating-a-parameter-description">
<h3>Adding or Updating a Parameter Description<a class="headerlink" href="#adding-or-updating-a-parameter-description" title="Link to this heading"></a></h3>
<ol class="arabic simple">
<li><p><strong>Find the appropriate config class</strong> where the parameter is defined or used:</p>
<ul class="simple">
<li><p>Training parameters → <code class="docutils literal notranslate"><span class="pre">cryoPARES/configs/train_config/train_config.py</span></code></p></li>
<li><p>Inference parameters → <code class="docutils literal notranslate"><span class="pre">cryoPARES/configs/inference_config/inference_config.py</span></code></p></li>
<li><p>Projection matching → <code class="docutils literal notranslate"><span class="pre">cryoPARES/configs/projmatching_config/projmatching_config.py</span></code></p></li>
<li><p>Reconstruction → <code class="docutils literal notranslate"><span class="pre">cryoPARES/configs/reconstruct_config/reconstruct_config.py</span></code></p></li>
<li><p>Data manager → <code class="docutils literal notranslate"><span class="pre">cryoPARES/configs/datamanager_config/datamanager_config.py</span></code></p></li>
<li><p>Particle dataset → <code class="docutils literal notranslate"><span class="pre">cryoPARES/configs/datamanager_config/particlesDataset_config.py</span></code></p></li>
</ul>
</li>
<li><p><strong>Update the <code class="docutils literal notranslate"><span class="pre">PARAM_DOCS</span></code> dictionary</strong> in that config class:</p></li>
</ol>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@dataclass</span>
<span class="k">class</span><span class="w"> </span><span class="nc">MyConfig</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Configuration parameters.&quot;&quot;&quot;</span>

    <span class="n">PARAM_DOCS</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;my_parameter&#39;</span><span class="p">:</span> <span class="s1">&#39;Clear, concise description of what this parameter does&#39;</span><span class="p">,</span>
        <span class="s1">&#39;another_param&#39;</span><span class="p">:</span> <span class="s1">&#39;Another description with usage guidance (Default values shown automatically)&#39;</span><span class="p">,</span>
    <span class="p">}</span>

    <span class="n">my_parameter</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">42</span>
    <span class="n">another_param</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;default&quot;</span>
</pre></div>
</div>
<ol class="arabic simple" start="3">
<li><p><strong>Regenerate documentation</strong>:</p></li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span><span class="w"> </span>/home/sanchezg/cryo/myProjects/cryoPARES
python<span class="w"> </span>docs/update_docs.py
</pre></div>
</div>
<ol class="arabic simple" start="4">
<li><p><strong>Verify the changes</strong>:</p></li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Check CLI help</span>
python<span class="w"> </span>-m<span class="w"> </span>cryoPARES.train.train<span class="w"> </span>--help

<span class="c1"># Validate documentation is up-to-date</span>
python<span class="w"> </span>docs/validate_docs.py
</pre></div>
</div>
<p>That’s it! The changes will automatically appear in CLI help, docstrings, and documentation files.</p>
</section>
</section>
<section id="documentation-system-architecture">
<h2>Documentation System Architecture<a class="headerlink" href="#documentation-system-architecture" title="Link to this heading"></a></h2>
<section id="param-docs-dictionary">
<h3>1. PARAM_DOCS Dictionary<a class="headerlink" href="#param-docs-dictionary" title="Link to this heading"></a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">PARAM_DOCS</span></code> dictionary in each config class is the <strong>single source of truth</strong> for parameter documentation:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@dataclass</span>
<span class="k">class</span><span class="w"> </span><span class="nc">Train_config</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Training configuration parameters.&quot;&quot;&quot;</span>

    <span class="n">PARAM_DOCS</span> <span class="o">=</span> <span class="p">{</span>
        <span class="c1"># Config parameters (appear in config files)</span>
        <span class="s1">&#39;n_epochs&#39;</span><span class="p">:</span> <span class="s1">&#39;Number of training epochs. More epochs allow better convergence...&#39;</span><span class="p">,</span>
        <span class="s1">&#39;batch_size&#39;</span><span class="p">:</span> <span class="s1">&#39;Number of particles per batch. Try to make it as large as possible...&#39;</span><span class="p">,</span>

        <span class="c1"># CLI-exposed parameters (not in config dataclass, but used in CLI functions)</span>
        <span class="s1">&#39;symmetry&#39;</span><span class="p">:</span> <span class="s1">&#39;Point group symmetry of the molecule (e.g., C1, D7, I, O, T)&#39;</span><span class="p">,</span>
        <span class="s1">&#39;particles_star_fname&#39;</span><span class="p">:</span> <span class="s1">&#39;Path(s) to RELION 3.1+ format .star file(s)...&#39;</span><span class="p">,</span>
    <span class="p">}</span>

    <span class="c1"># Actual config fields</span>
    <span class="n">n_epochs</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">100</span>
    <span class="n">batch_size</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">64</span>
</pre></div>
</div>
</section>
<section id="automatic-cli-help-generation">
<h3>2. Automatic CLI Help Generation<a class="headerlink" href="#automatic-cli-help-generation" title="Link to this heading"></a></h3>
<p>CLI functions use the <code class="docutils literal notranslate"><span class="pre">&#64;inject_docs_from_config_params</span></code> decorator to automatically format their docstrings:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">cryoPARES.configManager.inject_defaults</span><span class="w"> </span><span class="kn">import</span> <span class="n">inject_docs_from_config_params</span><span class="p">,</span> <span class="n">inject_defaults_from_config</span>

<span class="nd">@inject_docs_from_config_params</span>
<span class="nd">@inject_defaults_from_config</span><span class="p">(</span><span class="n">main_config</span><span class="o">.</span><span class="n">train</span><span class="p">,</span> <span class="n">update_config_with_args</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">symmetry</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">particles_star_fname</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="o">...</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Train a model on particle data.</span>

<span class="sd">    Args:</span>
<span class="sd">        symmetry: {symmetry}</span>
<span class="sd">        particles_star_fname: {particles_star_fname}</span>
<span class="sd">        n_epochs: {n_epochs}</span>
<span class="sd">        batch_size: {batch_size}</span>
<span class="sd">    &quot;&quot;&quot;</span>
</pre></div>
</div>
<p>The decorator replaces <code class="docutils literal notranslate"><span class="pre">{parameter_name}</span></code> placeholders with descriptions from <code class="docutils literal notranslate"><span class="pre">PARAM_DOCS</span></code>.</p>
</section>
<section id="auto-generated-documentation-sections">
<h3>3. Auto-Generated Documentation Sections<a class="headerlink" href="#auto-generated-documentation-sections" title="Link to this heading"></a></h3>
<p>README.md and docs/cli.md contain special markers that define auto-generated sections:</p>
<div class="highlight-markdown notranslate"><div class="highlight"><pre><span></span><span class="gs">**Key Arguments:**</span>

&lt;!-- AUTO_GENERATED:train_parameters:START --&gt;
<span class="k">*</span><span class="w"> </span>  <span class="sb">`--symmetry`</span>: Point group symmetry of the molecule (e.g., C1, D7, I, O, T)
<span class="k">*</span><span class="w"> </span>  <span class="sb">`--particles_star_fname`</span>: Path(s) to RELION 3.1+ format .star file(s)...
&lt;!-- AUTO_GENERATED:train_parameters:END --&gt;

<span class="gs">**Additional Information:**</span>
This manual text is preserved and never overwritten.
</pre></div>
</div>
<p>Everything between <code class="docutils literal notranslate"><span class="pre">START</span></code> and <code class="docutils literal notranslate"><span class="pre">END</span></code> markers is replaced when you run <code class="docutils literal notranslate"><span class="pre">update_docs.py</span></code>.</p>
</section>
</section>
<section id="documentation-scripts">
<h2>Documentation Scripts<a class="headerlink" href="#documentation-scripts" title="Link to this heading"></a></h2>
<section id="docs-generate-cli-docs-py">
<h3>docs/generate_cli_docs.py<a class="headerlink" href="#docs-generate-cli-docs-py" title="Link to this heading"></a></h3>
<p>Generates formatted documentation from PARAM_DOCS and function signatures.</p>
<p><strong>Usage:</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Generate all modules in README format</span>
python<span class="w"> </span>docs/generate_cli_docs.py<span class="w"> </span>--module<span class="w"> </span>all<span class="w"> </span>--format<span class="w"> </span>readme

<span class="c1"># Generate single module in CLI format</span>
python<span class="w"> </span>docs/generate_cli_docs.py<span class="w"> </span>--module<span class="w"> </span>train<span class="w"> </span>--format<span class="w"> </span>cli

<span class="c1"># Output to file instead of stdout</span>
python<span class="w"> </span>docs/generate_cli_docs.py<span class="w"> </span>--module<span class="w"> </span>inference<span class="w"> </span>--format<span class="w"> </span>readme<span class="w"> </span>--output<span class="w"> </span>/tmp/output.md
</pre></div>
</div>
<p><strong>Options:</strong></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">--module</span> <span class="pre">{train,inference,projmatching,reconstruct,all}</span></code> - Which module to generate docs for</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--format</span> <span class="pre">{readme,cli}</span></code> - Output format (bullet lists for README, tables for CLI docs)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--output</span> <span class="pre">FILE</span></code> - Output file (default: stdout)</p></li>
</ul>
</section>
<section id="docs-update-docs-py">
<h3>docs/update_docs.py<a class="headerlink" href="#docs-update-docs-py" title="Link to this heading"></a></h3>
<p>Updates documentation files in-place by replacing auto-generated sections.</p>
<p><strong>Usage:</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Update all default files (README.md and docs/cli.md)</span>
python<span class="w"> </span>docs/update_docs.py

<span class="c1"># Dry run (show what would change without modifying files)</span>
python<span class="w"> </span>docs/update_docs.py<span class="w"> </span>--dry-run

<span class="c1"># Update specific files</span>
python<span class="w"> </span>docs/update_docs.py<span class="w"> </span>README.md

<span class="c1"># Don&#39;t create backup files</span>
python<span class="w"> </span>docs/update_docs.py<span class="w"> </span>--no-backup
</pre></div>
</div>
<p><strong>Options:</strong></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">--dry-run</span></code> - Show what would be changed without actually modifying files</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--no-backup</span></code> - Don’t create <code class="docutils literal notranslate"><span class="pre">.bak</span></code> files before updating</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">files</span></code> - Specific files to update (default: README.md and docs/cli.md)</p></li>
</ul>
<p><strong>Output:</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>Processing /path/to/README.md...
  Found 4 section(s) to update:
    - train_parameters: 20 → 42 lines
    - inference_parameters: 22 → 50 lines
  Created backup: /path/to/README.md.bak
  ✓ Updated /path/to/README.md

✓ Documentation updated successfully
</pre></div>
</div>
</section>
<section id="docs-validate-docs-py">
<h3>docs/validate_docs.py<a class="headerlink" href="#docs-validate-docs-py" title="Link to this heading"></a></h3>
<p>Validates that auto-generated documentation is up-to-date (for CI/CD).</p>
<p><strong>Usage:</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Validate all default files</span>
python<span class="w"> </span>docs/validate_docs.py

<span class="c1"># Quiet mode (only errors and summary)</span>
python<span class="w"> </span>docs/validate_docs.py<span class="w"> </span>--quiet

<span class="c1"># Validate specific files</span>
python<span class="w"> </span>docs/validate_docs.py<span class="w"> </span>README.md<span class="w"> </span>docs/cli.md
</pre></div>
</div>
<p><strong>Exit codes:</strong></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">0</span></code> - All documentation is up-to-date</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">1</span></code> - Documentation is out of date (needs regeneration)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">2</span></code> - Script error (missing files, etc.)</p></li>
</ul>
<p><strong>Example output:</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>Validating /path/to/README.md...
  ✓ Up-to-date (4 sections)
Validating /path/to/docs/cli.md...
  ✗ Out of date - 2 section(s) need updating:
    - train_cli: 73 → 32 lines
    - inference_cli: 64 → 36 lines

✗ Documentation validation failed
  Run &#39;python docs/update_docs.py&#39; to regenerate documentation
</pre></div>
</div>
</section>
</section>
<section id="workflow-examples">
<h2>Workflow Examples<a class="headerlink" href="#workflow-examples" title="Link to this heading"></a></h2>
<section id="example-1-adding-a-new-parameter">
<h3>Example 1: Adding a New Parameter<a class="headerlink" href="#example-1-adding-a-new-parameter" title="Link to this heading"></a></h3>
<p>You’re adding a new parameter <code class="docutils literal notranslate"><span class="pre">--enable_awesome_feature</span></code> to training:</p>
<ol class="arabic simple">
<li><p><strong>Add to config class</strong> (<code class="docutils literal notranslate"><span class="pre">cryoPARES/configs/train_config/train_config.py</span></code>):</p></li>
</ol>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">PARAM_DOCS</span> <span class="o">=</span> <span class="p">{</span>
    <span class="c1"># ... existing parameters ...</span>
    <span class="s1">&#39;enable_awesome_feature&#39;</span><span class="p">:</span> <span class="s1">&#39;Enable the awesome new feature that improves training by 50%&#39;</span><span class="p">,</span>
<span class="p">}</span>

<span class="n">enable_awesome_feature</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li><p><strong>Add to CLI function</strong> (<code class="docutils literal notranslate"><span class="pre">cryoPARES/train/train.py</span></code>):</p></li>
</ol>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@inject_docs_from_config_params</span>
<span class="nd">@inject_defaults_from_config</span><span class="p">(</span><span class="n">main_config</span><span class="o">.</span><span class="n">train</span><span class="p">,</span> <span class="n">update_config_with_args</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">symmetry</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="o">...</span><span class="p">,</span> <span class="n">enable_awesome_feature</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="n">CONFIG_PARAM</span><span class="p">()):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Train a model on particle data.</span>

<span class="sd">    Args:</span>
<span class="sd">        ...</span>
<span class="sd">        enable_awesome_feature: {enable_awesome_feature}</span>
<span class="sd">    &quot;&quot;&quot;</span>
</pre></div>
</div>
<ol class="arabic simple" start="3">
<li><p><strong>Regenerate docs</strong>:</p></li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python<span class="w"> </span>docs/update_docs.py
</pre></div>
</div>
<p>Done! The new parameter now appears in CLI help, README.md, and docs/cli.md.</p>
</section>
<section id="example-2-improving-an-existing-description">
<h3>Example 2: Improving an Existing Description<a class="headerlink" href="#example-2-improving-an-existing-description" title="Link to this heading"></a></h3>
<p>You want to clarify the <code class="docutils literal notranslate"><span class="pre">batch_size</span></code> parameter description:</p>
<ol class="arabic simple">
<li><p><strong>Update PARAM_DOCS</strong> (<code class="docutils literal notranslate"><span class="pre">cryoPARES/configs/train_config/train_config.py</span></code>):</p></li>
</ol>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">PARAM_DOCS</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;batch_size&#39;</span><span class="p">:</span> <span class="s1">&#39;Number of particles per batch. Larger batches improve training stability but require more GPU memory. We recommend batch sizes of at least 32 images. If you encounter OOM errors, reduce this value.&#39;</span><span class="p">,</span>
<span class="p">}</span>
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li><p><strong>Regenerate docs</strong>:</p></li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python<span class="w"> </span>docs/update_docs.py
</pre></div>
</div>
<p>The improved description automatically appears everywhere!</p>
</section>
<section id="example-3-ci-cd-integration">
<h3>Example 3: CI/CD Integration<a class="headerlink" href="#example-3-ci-cd-integration" title="Link to this heading"></a></h3>
<p>Add this to your GitHub Actions / CI workflow:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Validate documentation is up-to-date</span>
<span class="w">  </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
<span class="w">    </span><span class="no">python docs/validate_docs.py</span>

<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Check for uncommitted doc changes</span>
<span class="w">  </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
<span class="w">    </span><span class="no">if [[ -n $(git status -s README.md docs/cli.md) ]]; then</span>
<span class="w">      </span><span class="no">echo &quot;Error: Documentation is out of sync. Run &#39;python docs/update_docs.py&#39; and commit changes.&quot;</span>
<span class="w">      </span><span class="no">exit 1</span>
<span class="w">    </span><span class="no">fi</span>
</pre></div>
</div>
</section>
</section>
<section id="best-practices">
<h2>Best Practices<a class="headerlink" href="#best-practices" title="Link to this heading"></a></h2>
<section id="writing-good-parameter-descriptions">
<h3>Writing Good Parameter Descriptions<a class="headerlink" href="#writing-good-parameter-descriptions" title="Link to this heading"></a></h3>
<ol class="arabic simple">
<li><p><strong>Be concise but complete</strong>: One or two sentences is usually enough</p></li>
<li><p><strong>Explain the purpose, not just the type</strong>: “Number of training epochs” vs “Maximum iterations for model convergence”</p></li>
<li><p><strong>Include guidance</strong>: “Larger values improve accuracy but increase memory usage”</p></li>
<li><p><strong>Don’t repeat the parameter name</strong>: ❌ “batch_size is the batch size” ✅ “Number of particles processed together”</p></li>
<li><p><strong>Mention defaults only for key parameters</strong>: The system automatically adds <code class="docutils literal notranslate"><span class="pre">(Default:</span> <span class="pre">X)</span></code> to optional parameters</p></li>
<li><p><strong>Use active voice</strong>: “Enables GPU acceleration” vs “GPU acceleration is enabled”</p></li>
</ol>
</section>
<section id="when-to-update-which-file">
<h3>When to Update Which File<a class="headerlink" href="#when-to-update-which-file" title="Link to this heading"></a></h3>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Change Type</p></th>
<th class="head"><p>File to Update</p></th>
<th class="head"><p>Next Step</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Add/modify parameter description</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">configs/*/PARAM_DOCS</span></code></p></td>
<td><p>Run <code class="docutils literal notranslate"><span class="pre">update_docs.py</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>Add narrative documentation</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">README.md</span></code> or <code class="docutils literal notranslate"><span class="pre">docs/*.md</span></code></p></td>
<td><p>Edit directly (outside markers)</p></td>
</tr>
<tr class="row-even"><td><p>Add new auto-generated section</p></td>
<td><p>Add markers to docs, update <code class="docutils literal notranslate"><span class="pre">update_docs.py</span></code></p></td>
<td><p>Run <code class="docutils literal notranslate"><span class="pre">update_docs.py</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>Fix generated table formatting</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">docs/generate_cli_docs.py</span></code></p></td>
<td><p>Run <code class="docutils literal notranslate"><span class="pre">update_docs.py</span></code></p></td>
</tr>
</tbody>
</table>
</section>
<section id="marker-guidelines">
<h3>Marker Guidelines<a class="headerlink" href="#marker-guidelines" title="Link to this heading"></a></h3>
<p>When adding new auto-generated sections to documentation files:</p>
<ol class="arabic simple">
<li><p><strong>Use descriptive marker names</strong>: <code class="docutils literal notranslate"><span class="pre">train_parameters</span></code>, not <code class="docutils literal notranslate"><span class="pre">section1</span></code></p></li>
<li><p><strong>Keep markers outside manual content</strong>: Don’t put markers inside paragraphs</p></li>
<li><p><strong>Register markers</strong> in <code class="docutils literal notranslate"><span class="pre">docs/update_docs.py</span></code>:</p></li>
</ol>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">GENERATORS</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Callable</span><span class="p">[[],</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;my_new_section&quot;</span><span class="p">:</span> <span class="k">lambda</span><span class="p">:</span> <span class="n">generate_my_docs</span><span class="p">(</span><span class="s2">&quot;format&quot;</span><span class="p">),</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
</section>
<section id="troubleshooting">
<h2>Troubleshooting<a class="headerlink" href="#troubleshooting" title="Link to this heading"></a></h2>
<section id="problem-cli-help-not-updating-after-changing-param-docs">
<h3>Problem: CLI help not updating after changing PARAM_DOCS<a class="headerlink" href="#problem-cli-help-not-updating-after-changing-param-docs" title="Link to this heading"></a></h3>
<p><strong>Cause</strong>: Python imports are cached</p>
<p><strong>Solution</strong>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># If using editable install (pip install -e .)</span>
pip<span class="w"> </span>install<span class="w"> </span>-e<span class="w"> </span>.<span class="w"> </span>--force-reinstall<span class="w"> </span>--no-deps

<span class="c1"># Or restart your Python interpreter</span>
</pre></div>
</div>
</section>
<section id="problem-update-docs-py-says-no-generator-found-for-marker">
<h3>Problem: update_docs.py says “No generator found for marker”<a class="headerlink" href="#problem-update-docs-py-says-no-generator-found-for-marker" title="Link to this heading"></a></h3>
<p><strong>Cause</strong>: Marker name not registered in <code class="docutils literal notranslate"><span class="pre">GENERATORS</span></code> dict</p>
<p><strong>Solution</strong>: Add the mapping in <code class="docutils literal notranslate"><span class="pre">docs/update_docs.py</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">GENERATORS</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;your_marker_name&quot;</span><span class="p">:</span> <span class="k">lambda</span><span class="p">:</span> <span class="n">generate_function</span><span class="p">(</span><span class="s2">&quot;format&quot;</span><span class="p">),</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="problem-documentation-has-wrong-default-values">
<h3>Problem: Documentation has wrong default values<a class="headerlink" href="#problem-documentation-has-wrong-default-values" title="Link to this heading"></a></h3>
<p><strong>Cause</strong>: CONFIG_PARAM() default doesn’t match config value</p>
<p><strong>Solution</strong>: Ensure the config class has the correct default:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@dataclass</span>
<span class="k">class</span><span class="w"> </span><span class="nc">MyConfig</span><span class="p">:</span>
    <span class="n">my_param</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">42</span>  <span class="c1"># ← This is the default shown in docs</span>
</pre></div>
</div>
</section>
<section id="problem-validation-fails-but-files-look-correct">
<h3>Problem: Validation fails but files look correct<a class="headerlink" href="#problem-validation-fails-but-files-look-correct" title="Link to this heading"></a></h3>
<p><strong>Cause</strong>: Whitespace differences or line ending issues</p>
<p><strong>Solution</strong>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Regenerate to normalize formatting</span>
python<span class="w"> </span>docs/update_docs.py

<span class="c1"># Validate again</span>
python<span class="w"> </span>docs/validate_docs.py
</pre></div>
</div>
</section>
</section>
<section id="advanced-topics">
<h2>Advanced Topics<a class="headerlink" href="#advanced-topics" title="Link to this heading"></a></h2>
<section id="cross-config-parameters">
<h3>Cross-Config Parameters<a class="headerlink" href="#cross-config-parameters" title="Link to this heading"></a></h3>
<p>Some parameters are defined in one config but used in another CLI. For example, <code class="docutils literal notranslate"><span class="pre">num_dataworkers</span></code> from <code class="docutils literal notranslate"><span class="pre">DataManager_config</span></code> used in <code class="docutils literal notranslate"><span class="pre">train.py</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># In datamanager_config.py</span>
<span class="n">PARAM_DOCS</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;num_dataworkers&#39;</span><span class="p">:</span> <span class="s1">&#39;Number of parallel data loading workers...&#39;</span><span class="p">,</span>
<span class="p">}</span>

<span class="c1"># In train.py</span>
<span class="nd">@inject_docs_from_config_params</span>
<span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">num_dataworkers</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">CONFIG_PARAM</span><span class="p">()):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Args:</span>
<span class="sd">        num_dataworkers: {num_dataworkers}</span>
<span class="sd">    &quot;&quot;&quot;</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">CONFIG_PARAM()</span></code> knows which config it comes from, so the decorator finds the right <code class="docutils literal notranslate"><span class="pre">PARAM_DOCS</span></code>.</p>
</section>
<section id="custom-documentation-generators">
<h3>Custom Documentation Generators<a class="headerlink" href="#custom-documentation-generators" title="Link to this heading"></a></h3>
<p>To add a new generator for a different module:</p>
<ol class="arabic simple">
<li><p><strong>Add generator function</strong> to <code class="docutils literal notranslate"><span class="pre">docs/generate_cli_docs.py</span></code>:</p></li>
</ol>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">generate_my_module_docs</span><span class="p">(</span><span class="n">output_format</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;readme&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Generate documentation for my_module.&quot;&quot;&quot;</span>
    <span class="kn">from</span><span class="w"> </span><span class="nn">cryoPARES.my_module.my_cli</span><span class="w"> </span><span class="kn">import</span> <span class="n">my_function</span>

    <span class="n">param_docs</span> <span class="o">=</span> <span class="n">collect_param_docs</span><span class="p">([</span><span class="n">MyConfig</span><span class="p">])</span>
    <span class="n">params</span> <span class="o">=</span> <span class="n">extract_function_params</span><span class="p">(</span><span class="n">my_function</span><span class="p">,</span> <span class="n">param_docs</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">output_format</span> <span class="o">==</span> <span class="s2">&quot;readme&quot;</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">generate_parameter_table_readme</span><span class="p">(</span><span class="n">params</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="s2">&quot;bullets&quot;</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">output_format</span> <span class="o">==</span> <span class="s2">&quot;cli&quot;</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">generate_cli_section</span><span class="p">(</span><span class="s2">&quot;my_command&quot;</span><span class="p">,</span> <span class="n">my_function</span><span class="p">,</span> <span class="n">param_docs</span><span class="p">,</span> <span class="s2">&quot;Description&quot;</span><span class="p">)</span>

    <span class="k">return</span> <span class="s2">&quot;&quot;</span>
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li><p><strong>Register in GENERATORS</strong> in <code class="docutils literal notranslate"><span class="pre">docs/update_docs.py</span></code>:</p></li>
</ol>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">GENERATORS</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;my_module_params&quot;</span><span class="p">:</span> <span class="k">lambda</span><span class="p">:</span> <span class="n">generate_my_module_docs</span><span class="p">(</span><span class="s2">&quot;readme&quot;</span><span class="p">),</span>
    <span class="s2">&quot;my_module_cli&quot;</span><span class="p">:</span> <span class="k">lambda</span><span class="p">:</span> <span class="n">generate_my_module_docs</span><span class="p">(</span><span class="s2">&quot;cli&quot;</span><span class="p">),</span>
<span class="p">}</span>
</pre></div>
</div>
<ol class="arabic simple" start="3">
<li><p><strong>Add markers</strong> to your documentation files:</p></li>
</ol>
<div class="highlight-markdown notranslate"><div class="highlight"><pre><span></span>&lt;!-- AUTO_GENERATED:my_module_params:START --&gt;
&lt;!-- AUTO_GENERATED:my_module_params:END --&gt;
</pre></div>
</div>
</section>
</section>
<section id="further-reading">
<h2>Further Reading<a class="headerlink" href="#further-reading" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p><strong><code class="docutils literal notranslate"><span class="pre">cryoPARES/configManager/PARAM_DOCS_SYSTEM.md</span></code></strong> - Technical details of the PARAM_DOCS system</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">cryoPARES/configManager/inject_defaults.py</span></code></strong> - Implementation of decorators</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">docs/generate_cli_docs.py</span></code></strong> - Documentation generator source code</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">docs/update_docs.py</span></code></strong> - Update script source code</p></li>
</ul>
</section>
<section id="summary-checklist">
<h2>Summary Checklist<a class="headerlink" href="#summary-checklist" title="Link to this heading"></a></h2>
<p>When updating parameter documentation:</p>
<ul class="simple">
<li><p>[ ] Update <code class="docutils literal notranslate"><span class="pre">PARAM_DOCS</span></code> in appropriate config class</p></li>
<li><p>[ ] Run <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">docs/update_docs.py</span></code></p></li>
<li><p>[ ] Verify with <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">docs/validate_docs.py</span></code></p></li>
<li><p>[ ] Test CLI help: <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">-m</span> <span class="pre">cryoPARES.{module}</span> <span class="pre">--help</span></code></p></li>
<li><p>[ ] Check Sphinx build: <code class="docutils literal notranslate"><span class="pre">cd</span> <span class="pre">docs</span> <span class="pre">&amp;&amp;</span> <span class="pre">make</span> <span class="pre">html</span></code></p></li>
<li><p>[ ] Commit both config changes and regenerated docs</p></li>
</ul>
</section>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, Ruben Sanchez-Garcia.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>